<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Trabajo Práctico 2 - Programación Distribuída: TP2-OS2-2017/include/multithreaded.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Trabajo Práctico 2 - Programación Distribuída
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('multithreaded_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">multithreaded.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Libreria de la ejecución multithread.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;omp.h&gt;</code><br />
<code>#include &quot;<a class="el" href="colors_8h_source.html">../include/colors.h</a>&quot;</code><br />
</div>
<p><a href="multithreaded_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_lectura.html">Lectura</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pulso.html">Pulso</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_gate.html">Gate</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8efce6086b53da62e8f3b393fd293856"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a8efce6086b53da62e8f3b393fd293856">MAX_DATOS_LECTURA</a>&#160;&#160;&#160;5900</td></tr>
<tr class="separator:a8efce6086b53da62e8f3b393fd293856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ca9e10ac0634209ca45ba76db3c2e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a64ca9e10ac0634209ca45ba76db3c2e3">NUM_GATES</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:a64ca9e10ac0634209ca45ba76db3c2e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5747ce5beae65002b9ee2c4a4cf8c329"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a5747ce5beae65002b9ee2c4a4cf8c329">MAX_NUM_THREADS</a>&#160;&#160;&#160;201</td></tr>
<tr class="separator:a5747ce5beae65002b9ee2c4a4cf8c329"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae41842c06489bd9e690a8e7bfe497d80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#ae41842c06489bd9e690a8e7bfe497d80">leer_numero_pulsos_archivo</a> (char file_name[], int *num_pulso, int *size_bytes)</td></tr>
<tr class="memdesc:ae41842c06489bd9e690a8e7bfe497d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee del archivo el numero de pulsos que contiene, para acelerar el procesamiento.  <a href="#ae41842c06489bd9e690a8e7bfe497d80">More...</a><br /></td></tr>
<tr class="separator:ae41842c06489bd9e690a8e7bfe497d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71c44a78f10e6239113d7dd20e9429b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a71c44a78f10e6239113d7dd20e9429b2">leer_archivo</a> (char file_name[], struct <a class="el" href="struct_pulso.html">Pulso</a> pulsos[], int len_file)</td></tr>
<tr class="memdesc:a71c44a78f10e6239113d7dd20e9429b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee el archivo binario "pulsos.iq" y guarda su contenido en una estructura.  <a href="#a71c44a78f10e6239113d7dd20e9429b2">More...</a><br /></td></tr>
<tr class="separator:a71c44a78f10e6239113d7dd20e9429b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97574d2b00d6cc62a7b5d8f6b2c341f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#ac97574d2b00d6cc62a7b5d8f6b2c341f">valor_absoluto</a> (float u, float v)</td></tr>
<tr class="memdesc:ac97574d2b00d6cc62a7b5d8f6b2c341f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcula el valor absoluto de un número complejo.  <a href="#ac97574d2b00d6cc62a7b5d8f6b2c341f">More...</a><br /></td></tr>
<tr class="separator:ac97574d2b00d6cc62a7b5d8f6b2c341f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60310c3da2379b98548fefaa152f00d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a60310c3da2379b98548fefaa152f00d5">promedio_y_valor_absoluto</a> (struct <a class="el" href="struct_pulso.html">Pulso</a> pulsos[], struct <a class="el" href="struct_gate.html">Gate</a> gates[], int num_pulsos)</td></tr>
<tr class="memdesc:a60310c3da2379b98548fefaa152f00d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcula promedios de mediciones en cada gate, y el valor absoluto de las mismas.  <a href="#a60310c3da2379b98548fefaa152f00d5">More...</a><br /></td></tr>
<tr class="separator:a60310c3da2379b98548fefaa152f00d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f6d8f05eea6e770c4fa77e24eebc243"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a6f6d8f05eea6e770c4fa77e24eebc243">autocorrelacion</a> (float vector[], int len, float resultado[])</td></tr>
<tr class="memdesc:a6f6d8f05eea6e770c4fa77e24eebc243"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcula la autocorrelacion normalizada de un vector dado.  <a href="#a6f6d8f05eea6e770c4fa77e24eebc243">More...</a><br /></td></tr>
<tr class="separator:a6f6d8f05eea6e770c4fa77e24eebc243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756d54edf59e740200757f2a1fd31602"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a756d54edf59e740200757f2a1fd31602">calcular_autocorrelacion</a> (struct <a class="el" href="struct_gate.html">Gate</a> gates[], int num_pulsos)</td></tr>
<tr class="memdesc:a756d54edf59e740200757f2a1fd31602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dado un conjunto de gates, calcula la autocorrelacion normalizada de cada uno.  <a href="#a756d54edf59e740200757f2a1fd31602">More...</a><br /></td></tr>
<tr class="separator:a756d54edf59e740200757f2a1fd31602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5cca5aa3b794a65e8540161d037289"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a6f5cca5aa3b794a65e8540161d037289">guardar_archivo</a> (struct <a class="el" href="struct_gate.html">Gate</a> gates[], char filename[], int num_pulsos)</td></tr>
<tr class="memdesc:a6f5cca5aa3b794a65e8540161d037289"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guarda en un archivo binario el resultado de los calculos.  <a href="#a6f5cca5aa3b794a65e8540161d037289">More...</a><br /></td></tr>
<tr class="separator:a6f5cca5aa3b794a65e8540161d037289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ff16e0bb75aaa9d28d003b262865f7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a4ff16e0bb75aaa9d28d003b262865f7e">initialize_gates</a> (struct <a class="el" href="struct_gate.html">Gate</a> gates[], int cant_pulsos_archivo)</td></tr>
<tr class="memdesc:a4ff16e0bb75aaa9d28d003b262865f7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inicializa los campos de la estructura de tipo <a class="el" href="struct_gate.html">Gate</a> para alojar los pulsos leidos.  <a href="#a4ff16e0bb75aaa9d28d003b262865f7e">More...</a><br /></td></tr>
<tr class="separator:a4ff16e0bb75aaa9d28d003b262865f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40d802fe11972ccbf9b805ee4604a0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#ae40d802fe11972ccbf9b805ee4604a0e">free_absolute_values_gates</a> (struct <a class="el" href="struct_gate.html">Gate</a> gates[])</td></tr>
<tr class="memdesc:ae40d802fe11972ccbf9b805ee4604a0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Libera la memoria reservada previamente para los valores absolutos de las mediciones.  <a href="#ae40d802fe11972ccbf9b805ee4604a0e">More...</a><br /></td></tr>
<tr class="separator:ae40d802fe11972ccbf9b805ee4604a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e6d504dcd92d8a497e8e5258d5ffb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#ab7e6d504dcd92d8a497e8e5258d5ffb5">save_time_to_file</a> (double execution_time, int hilos, char filename[])</td></tr>
<tr class="memdesc:ab7e6d504dcd92d8a497e8e5258d5ffb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guarda en un archivo de texto el numero de hilos y el tiempo de ejecucion.  <a href="#ab7e6d504dcd92d8a497e8e5258d5ffb5">More...</a><br /></td></tr>
<tr class="separator:ab7e6d504dcd92d8a497e8e5258d5ffb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a447f4d8fd2c97834a1b80336f2a91db6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multithreaded_8h.html#a447f4d8fd2c97834a1b80336f2a91db6">process_arguments</a> (int argc, char *argv[], int *time_flag, int *save_flag, int *num_threads)</td></tr>
<tr class="memdesc:a447f4d8fd2c97834a1b80336f2a91db6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Procesa los argumentos con los que se llamó el programa y setea los flags acorde a ello.  <a href="#a447f4d8fd2c97834a1b80336f2a91db6">More...</a><br /></td></tr>
<tr class="separator:a447f4d8fd2c97834a1b80336f2a91db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Libreria de la ejecución multithread. </p>
<p>Libreria del programa monothread, constantes, estructuras y prototipos de funciones.</p>
<dl class="section author"><dt>Author</dt><dd>Facundo Maero </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a8efce6086b53da62e8f3b393fd293856"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_DATOS_LECTURA&#160;&#160;&#160;5900</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Numero maximo de datos por pulso en el archivo a leer. </p>

</div>
</div>
<a class="anchor" id="a5747ce5beae65002b9ee2c4a4cf8c329"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_NUM_THREADS&#160;&#160;&#160;201</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Numero maximo de hilos para ejecutar el programa. </p>

</div>
</div>
<a class="anchor" id="a64ca9e10ac0634209ca45ba76db3c2e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_GATES&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Numero de gates que discrimina el radar. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6f6d8f05eea6e770c4fa77e24eebc243"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void autocorrelacion </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>vector</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>resultado</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcula la autocorrelacion normalizada de un vector dado. </p>
<p>Calcula la autocorrelacion del vector dada su longitud, y devuelve el resultado en otro vector de la misma longitud. Aprovechando la propiedad de simetría, se devuelve un vector de igual longitud que el vector de entrada, siendo cada valor en el mismo la correlacion sobre si mismo, variando el desplazamiento. Para normalizarlo, se dividen los resultados por el numero de elementos del vector.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vector[]</td><td>Vector a calcular la autocorrelacion. </td></tr>
    <tr><td class="paramname">len</td><td>Longitud del vector. </td></tr>
    <tr><td class="paramname">resultado[]</td><td>Resultado del calculo. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a756d54edf59e740200757f2a1fd31602"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calcular_autocorrelacion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_gate.html">Gate</a>&#160;</td>
          <td class="paramname"><em>gates</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_pulsos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dado un conjunto de gates, calcula la autocorrelacion normalizada de cada uno. </p>
<p>Calcula la autocorrelacion de cada vector columna gate, y guarda en ese gate el vector resultado.</p>
<p>Se paraleliza el bucle for, permitiendo calcular la autocorrelacion de cada gate por separado.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, de donde saca el vector de modulos, y donde guarda la correlacion calculada. </td></tr>
    <tr><td class="paramname">num_pulsos</td><td>Numero de pulsos en cada gate.</td></tr>
  </table>
  </dd>
</dl>
<p>Calcula la autocorrelacion de cada vector columna gate, y guarda en ese gate el vector resultado.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo gates, de donde saca el vector de modulos, y donde guarda la correlacion calculada. </td></tr>
    <tr><td class="paramname">num_pulsos</td><td>Numero de pulsos en cada gate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae40d802fe11972ccbf9b805ee4604a0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_absolute_values_gates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_gate.html">Gate</a>&#160;</td>
          <td class="paramname"><em>gates</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Libera la memoria reservada previamente para los valores absolutos de las mediciones. </p>
<p>Libera la porcion de memoria reservada por el arreglo de struct <a class="el" href="struct_gate.html">Gate</a>, para guardar los valores absolutos de las mediciones, ya que no se necesitan mas.</p>
<p>Se paraleliza el bucle for, ya que la operacion realizada en él no tiene relación de una iteración a otra, y el bucle tiene NUM_GATES iteraciones, valor considerado lo suficientemente grande para que justifique el uso de threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, con los datos a liberar.</td></tr>
  </table>
  </dd>
</dl>
<p>Libera la porcion de memoria reservada por el arreglo de struct <a class="el" href="struct_gate.html">Gate</a>, para guardar los valores absolutos de las mediciones, ya que no se necesitan mas.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, con los datos a liberar. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6f5cca5aa3b794a65e8540161d037289"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int guardar_archivo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_gate.html">Gate</a>&#160;</td>
          <td class="paramname"><em>gates</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>filename</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_pulsos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guarda en un archivo binario el resultado de los calculos. </p>
<p>Guarda en un archivo binario los valores calculados, con la siguiente estructura: numero de pulsos -&gt; uint16_t numero de gate actual (0) -&gt; uint16_t correlacion[0] -&gt; float correlacion[1] -&gt; float ... correlacion[numero de pulsos] -&gt; float</p>
<p>... numero de gate actual (500) -&gt; uint16_t correlacion[0] -&gt;float ... correlacion[numero de pulsos] -&gt; float</p>
<p>Dicho de otra manera, los datos se estructuran en una matriz, donde el eje x son los gates, y el eje y contiene el vector de autocorrelacion de cada gate. Se guarda el vector correspondiente al gate 0, luego el vector del gate 1, hasta el último.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, que contiene los resultados de la correlacion a guardar. </td></tr>
    <tr><td class="paramname">filename[]</td><td>Nombre del archivo donde se quieren guardar los datos. </td></tr>
    <tr><td class="paramname">num_pulsos</td><td>Numero de pulsos en cada gate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 si hubo un error, 0 caso contrario. </dd></dl>

</div>
</div>
<a class="anchor" id="a4ff16e0bb75aaa9d28d003b262865f7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_gates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_gate.html">Gate</a>&#160;</td>
          <td class="paramname"><em>gates</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cant_pulsos_archivo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inicializa los campos de la estructura de tipo <a class="el" href="struct_gate.html">Gate</a> para alojar los pulsos leidos. </p>
<p>Realiza el malloc de los elementos del arreglo gates. Si se quisiera leer un archivo donde no se sabe la cantidad de pulsos ahi contenidos, es necesario asignar memoria de manera dinamica. Esta reserva de memoria depende de la cantidad de pulsos, y se realiza mediante el wrapper safe_malloc, que verifica la correcta ejecucion de la syscall malloc().</p>
<p>Se paraleliza el bucle for, ya que la operacion realizada en él no tiene relación de una iteración a otra, y el bucle tiene NUM_GATES iteraciones, valor considerado lo suficientemente grande para que justifique el uso de threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, con punteros sin inicializar. </td></tr>
    <tr><td class="paramname">cant_pulsos_archivo</td><td>Cantidad de pulsos leida en el archivo, para reservar memoria.</td></tr>
  </table>
  </dd>
</dl>
<p>Realiza el malloc de los elementos del arreglo gates. Si se quisiera leer un archivo donde no se sabe la cantidad de pulsos ahi contenidos, es necesario asignar memoria de manera dinamica. Esta reserva de memoria depende de la cantidad de pulsos, y se realiza mediante el wrapper safe_malloc, que verifica la correcta ejecucion de la syscall malloc().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, con punteros sin inicializar. </td></tr>
    <tr><td class="paramname">cant_pulsos_archivo</td><td>Cantidad de pulsos leida en el archivo, para reservar memoria. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a71c44a78f10e6239113d7dd20e9429b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int leer_archivo </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>file_name</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_pulso.html">Pulso</a>&#160;</td>
          <td class="paramname"><em>pulsos</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee el archivo binario "pulsos.iq" y guarda su contenido en una estructura. </p>
<p>Lee el archivo binario con la salida del ADC del radar, interpreta su contenido y lo guarda en un arreglo de pulsos. Cada pulso es una estructura que aloja las lecturas de la componente horizontal y vertidal del pulso, y el número de lecturas realizadas.</p>
<p>Se explota el paralelismo al guardar el contenido de cada tabla: Se lee el tamaño de la tabla, y luego se leen de una vez todos los floats de la misma. Luego, se divide en dos secciones paralelas, aprovechando que la información horizontal y vertical está separada. Se van llenando los campos dato_v y dato_h de las estructuras <a class="el" href="struct_pulso.html">Pulso</a> en simultáneo.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name[]</td><td>El nombre del archivo a leer </td></tr>
    <tr><td class="paramname">pulsos[]</td><td>Arreglo de estructuras de tipo pulso, donde guardar la información leida. </td></tr>
    <tr><td class="paramname">len_file</td><td>Longitud del archivo en bytes, valor ya conocido. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 si hubo un error, 0 caso contrario.</dd></dl>
<p>Lee el archivo binario con la salida del ADC del radar, interpreta su contenido y lo guarda en un arreglo de pulsos. Cada pulso es una estructura que aloja las lecturas de la componente horizontal y vertidal del pulso, y el número de lecturas realizadas.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name[]</td><td>El nombre del archivo a leer </td></tr>
    <tr><td class="paramname">pulsos[]</td><td>Arreglo de estructuras de tipo pulso, donde guardar la información leida. </td></tr>
    <tr><td class="paramname">len_file</td><td>Longitud del archivo en bytes, valor ya conocido. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 si hubo un error, 0 caso contrario. </dd></dl>

</div>
</div>
<a class="anchor" id="ae41842c06489bd9e690a8e7bfe497d80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int leer_numero_pulsos_archivo </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>file_name</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>num_pulso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>size_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee del archivo el numero de pulsos que contiene, para acelerar el procesamiento. </p>
<p>Lee el archivo binario, y cuenta el numero de pulsos que contiene, solo leyendo el dato valid_samples de cada tabla de pulso. Además, lee el tamaño total del archivo.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name[]</td><td>El nombre del archivo a leer </td></tr>
    <tr><td class="paramname">num_pulso</td><td>Puntero para retornar el número de pulsos leídos. </td></tr>
    <tr><td class="paramname">size_bytes</td><td>Puntero para retornar el tamaño del archivo en bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 si hubo un error, 0 caso contrario. </dd></dl>

</div>
</div>
<a class="anchor" id="a447f4d8fd2c97834a1b80336f2a91db6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_arguments </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>time_flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>save_flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>num_threads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Procesa los argumentos con los que se llamó el programa y setea los flags acorde a ello. </p>
<p>Evalúa en un bucle los argumentos. Los valores aceptados son:</p><ul>
<li>-t Muestra por salida standard el tiempo de ejecución.</li>
<li>-s Guarda en un archivo de texto el número de hilos utilizado y el tiempo.</li>
<li>&lt;nro_hilos&gt; Número de hilos a utilizar. Si es un valor incorrecto avisa error. Si el argumento no existe, se informa del error.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Numero de argumentos con que se llamó el programa. </td></tr>
    <tr><td class="paramname">argv</td><td>Argumentos con los que se llamó el programa. </td></tr>
    <tr><td class="paramname">time_flag</td><td>Puntero al flag de mostrar tiempo, para modificarlo si es necesario. </td></tr>
    <tr><td class="paramname">save_flag</td><td>Puntero al flag de guardar el tiempo, para modificarlo si es necesario. </td></tr>
    <tr><td class="paramname">num_threads</td><td>Puntero al numero de hilos a usar, para modificarlo si es necesario. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a60310c3da2379b98548fefaa152f00d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void promedio_y_valor_absoluto </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_pulso.html">Pulso</a>&#160;</td>
          <td class="paramname"><em>pulsos</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_gate.html">Gate</a>&#160;</td>
          <td class="paramname"><em>gates</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_pulsos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcula promedios de mediciones en cada gate, y el valor absoluto de las mismas. </p>
<p>Dado un pulso, y una cantidad de mediciones asociada, distribuye las mismas en los 500 gates que discrimina el radar. Calcula el valor promedio de las mediciones por gate, y luego el valor absoluto de cada promedio.</p>
<p>Se acelera implementando un parallel for en el bucle más externo, que itera sobre el numero de pulsos en el archivo. Por lo tanto, se van calculando los promedios y el valor absoluto de las mediciones de cada pulso en paralelo, en función del número de hilos utilizado para ejecutar el programa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulsos[]</td><td>Arreglo de estructuras de tipo pulso, donde guardar la información leida. </td></tr>
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, donde guardar los promedios y modulos calculados. </td></tr>
    <tr><td class="paramname">num_pulsos</td><td>Numero de pulsos en la estructura pulsos.</td></tr>
  </table>
  </dd>
</dl>
<p>Dado un pulso, y una cantidad de mediciones asociada, distribuye las mismas en los 500 gates que discrimina el radar. Calcula el valor promedio de las mediciones por gate, y luego el valor absoluto de cada promedio.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulsos[]</td><td>Arreglo de estructuras de tipo pulso, donde guardar la información leida. </td></tr>
    <tr><td class="paramname">gates[]</td><td>Arreglo de estructuras de tipo gate, donde guardar los promedios y modulos calculados. </td></tr>
    <tr><td class="paramname">num_pulsos</td><td>Numero de pulsos en la estructura pulsos. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab7e6d504dcd92d8a497e8e5258d5ffb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int save_time_to_file </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>execution_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hilos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>filename</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guarda en un archivo de texto el numero de hilos y el tiempo de ejecucion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">execution_time</td><td>Tiempo de ejecucion [s] </td></tr>
    <tr><td class="paramname">hilos</td><td>Numero de hilos que ejecutaron el programa. </td></tr>
    <tr><td class="paramname">filename[]</td><td>Nombre del archivo a guardar los datos. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 si hubo un error, 0 caso contrario. </dd></dl>

</div>
</div>
<a class="anchor" id="ac97574d2b00d6cc62a7b5d8f6b2c341f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float valor_absoluto </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcula el valor absoluto de un número complejo. </p>
<p>Calcula el módulo o valor absoluto de un número complejo, que consiste en la raíz cuadrada de la suma de los cuadrados (Pitágoras).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u</td><td>Componente real. </td></tr>
    <tr><td class="paramname">v</td><td>Componente imaginaria. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result Módulo del complejo (u,v). </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4280c369746fc608241188a7b3d16250.html">TP2-OS2-2017</a></li><li class="navelem"><a class="el" href="dir_fa8e94c63773195e5150c4688bee52db.html">include</a></li><li class="navelem"><a class="el" href="multithreaded_8h.html">multithreaded.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
